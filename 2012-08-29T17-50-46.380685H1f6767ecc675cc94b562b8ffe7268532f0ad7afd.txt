#nb todo: asynchronous pre/post hooks and reindexing